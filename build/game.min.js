/*! bungee-owl 2013-08-26 */
function gameInit(){for(init_keys(),new createjs.Bitmap(assets.image.background["green-bg"]),i=0;5>i;i++){var a=new createjs.Bitmap(assets.image.background.gravel50x50);a.setTransform(50*i,0),stage.addChild(a)}var b=new createjs.SpriteSheet({images:[assets.sprite.people.turtle,assets.image.people.turtle_stand],frames:{width:50,height:75,regX:25,regY:37},animations:{run:[0,3,"run",3],stand:[4,4,"stand",3]}});createjs.SpriteSheetUtils.addFlippedFrames(b,!0,!1,!1),turtleAnimation=new createjs.BitmapAnimation(b),turtleAnimation.gotoAndPlay("run"),turtleAnimation.name="turtle1",turtleAnimation.direction=90,turtleAnimation.vX=9,turtleAnimation.x=25,turtleAnimation.y=40,turtleAnimation.currentFrame=0,stage.addChild(turtleAnimation),createjs.Ticker.addEventListener("tick",tick),createjs.Ticker.useRAF=!0,createjs.Ticker.setFPS(20)}function tick(){keys.right^keys.left?keys.right?("run"!==turtleAnimation.currentAnimation&&(turtleAnimation.direction=90,turtleAnimation.gotoAndPlay("run")),turtleAnimation.x<canvas.width-25&&(turtleAnimation.x+=turtleAnimation.vX)):keys.left&&("run_h"!==turtleAnimation.currentAnimation&&(turtleAnimation.direction=-90,turtleAnimation.gotoAndPlay("run_h")),turtleAnimation.x>25&&(turtleAnimation.x-=turtleAnimation.vX)):90==turtleAnimation.direction&&"stand"!==turtleAnimation.currentAnimation?turtleAnimation.gotoAndPlay("stand"):-90==turtleAnimation.direction&&"stand_h"!==turtleAnimation.currentAnimation&&turtleAnimation.gotoAndPlay("stand_h"),stage.update()}function init_keys(){function a(a){return assets.config.controls[a]||null}$(window).keydown(function(b){var c=a(b.which);null!==c&&(b.preventDefault(),keys[c]=!0)}),$(window).keyup(function(b){var c=a(b.which);null!==c&&(b.preventDefault(),delete keys[c])})}function init(){canvas=document.getElementById("gameCanvas"),stage=new createjs.Stage(canvas);var a={barx:50,bary:100,barw:400,barh:15,padx:10,pady:5,colour:"black",progress:5},b=new createjs.Text("Loading...","20px Arial",a.colour);b.setTransform(a.barx,a.bary-a.barh-4*a.pady),progressbar=new createjs.Shape,progressbar.graphics.f(a.colour).rect(a.barx,a.bary,a.progress,a.barh);var c=new createjs.Shape;c.graphics.s(a.colour).rect(a.barx-a.padx,a.bary-a.pady,a.barw+2*a.padx,a.barh+2*a.pady).es(),stage.addChild(progressbar),stage.addChild(b),stage.addChild(c),stage.update();var d=new createjs.LoadQueue,e=[{id:"config",src:"cfg/config.json"},{id:"image.background.green-bg",src:"assets/images/backgrounds/green-bg.jpg"},{id:"image.background.gravel50x50",src:"assets/images/backgrounds/gravel-50x50.png"},{id:"image.people.turtle_stand",src:"assets/images/people/turtle-stand.png"},{id:"sprite.people.turtle",src:"assets/sprites/people/turtle.png"}];d.addEventListener("complete",function(a){preloadComplete(a)}),d.addEventListener("fileload",function(b){var c=b.item.id.split("."),d=c.pop(),e=assets;c.forEach(function(a){"undefined"!=typeof e[a]?e=e[a]:(e[a]={},e=e[a])}),e[d]=b.result,progressbar.graphics.clear(),progressbar.graphics.f(a.colour).rect(a.barx,a.bary,a.progress+=a.progressInterval,a.barh),stage.update()}),d.loadManifest(e),a.progressInterval=parseInt((a.barw-5)*(1/e.length),10)}function preloadComplete(){console.log("Assets Loaded."),console.log(assets),stage.removeAllChildren(),gameInit()}var turtleAnimation,InputHandler={walkUp:function(){},walkDown:function(){},walkLeft:function(){},walkRight:function(){}},keys={},stage,assets={},canvas;